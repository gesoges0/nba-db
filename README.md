# nba-db
NBA stats DB api

### build
```sh
$ docker compose build
```

### run containers
```
$ docker compose up
```

### mysql 
another window
```sh
$ docker container exec -it mysql_host bash -c "mysql test_database -uroot -proot"
mysql> show tables;
+-------------------------+
| Tables_in_test_database |
+-------------------------+
| active_players          |
| all_players             |
| inactive_players        |
| player_game_log         |
| team_game_log           |
| teams                   |
+-------------------------+
6 rows in set (0.00 sec)

mysql> SELECT * FROM inactive_players LIMIT 3;
+----+-----------------+------------+------------+-----------+---------------------+---------------------+
| id | full_name       | first_name | last_name  | is_active | created_at          | updated_at          |
+----+-----------------+------------+------------+-----------+---------------------+---------------------+
|  2 | Byron Scott     | Byron      | Scott      |         0 | 2022-08-19 13:41:37 | 2022-08-19 13:41:37 |
|  3 | Grant Long      | Grant      | Long       |         0 | 2022-08-19 13:41:37 | 2022-08-19 13:41:37 |
|  7 | Dan Schayes     | Dan        | Schayes    |         0 | 2022-08-19 13:41:37 | 2022-08-19 13:41:37 |
+----+-----------------+------------+------------+-----------+---------------------+---------------------+
3 rows in set (0.00 sec)

mysql> SELECT * FROM player_game_log LIMIT 3;
+-----------+-----------+------------+--------------+-------------+------+------+------+------+--------+------+------+---------+------+------+--------+------+------+------+------+------+------+------+------+------+------------+-----------------+---------------------+---------------------+
| SEASON_ID | Player_ID | Game_ID    | GAME_DATE    | MATCHUP     | WL   | MIN  | FGM  | FGA  | FG_PCT | FG3M | FG3A | FG3_PCT | FTM  | FTA  | FT_PCT | OREB | DREB | REB  | AST  | STL  | BLK  | TOV  | PF   | PTS  | PLUS_MINUS | VIDEO_AVAILABLE | created_at          | updated_at          |
+-----------+-----------+------------+--------------+-------------+------+------+------+------+--------+------+------+---------+------+------+--------+------+------+------+------+------+------+------+------+------+------------+-----------------+---------------------+---------------------+
| 22021     |    203500 | 0022100007 | OCT 20, 2021 | MEM vs. CLE | W    |   32 |    4 |    7 |  0.571 |    0 |    0 |       0 |    0 |    0 |      0 |    6 |    8 |   14 |    3 |    1 |    1 |    2 |    0 |    8 |          1 |               1 | 2022-08-23 17:32:59 | 2022-08-23 17:32:59 |
| 22021     |    203500 | 0022100034 | OCT 23, 2021 | MEM @ LAC   | W    |   27 |    6 |    9 |  0.667 |    0 |    0 |       0 |    5 |    5 |      1 |    5 |    4 |    9 |    5 |    2 |    0 |    1 |    0 |   17 |         17 |               1 | 2022-08-23 17:32:59 | 2022-08-23 17:32:59 |
| 22021     |    203500 | 0022100040 | OCT 24, 2021 | MEM @ LAL   | L    |   34 |    7 |   11 |  0.636 |    0 |    0 |       0 |    0 |    0 |      0 |    8 |    8 |   16 |    6 |    0 |    0 |    4 |    5 |   14 |         15 |               1 | 2022-08-23 17:32:59 | 2022-08-23 17:32:59 |
+-----------+-----------+------------+--------------+-------------+------+------+------+------+--------+------+------+---------+------+------+--------+------+------+------+------+------+------+------+------+------+------------+-----------------+---------------------+---------------------+
3 rows in set (0.00 sec)

mysql> SELECT * FROM team_game_log LIMIT 3;
+------------+------------+--------------+-------------+------+------+------+-------+------+------+------+--------+------+------+---------+------+------+--------+------+------+------+------+------+------+------+------+------+---------------------+---------------------+
| Team_ID    | Game_ID    | GAME_DATE    | MATCHUP     | WL   | W    | L    | W_PCT | MIN  | FGM  | FGA  | FG_PCT | FG3M | FG3A | FG3_PCT | FTM  | FTA  | FT_PCT | OREB | DREB | REB  | AST  | STL  | BLK  | TOV  | PF   | PTS  | created_at          | updated_at          |
+------------+------------+--------------+-------------+------+------+------+-------+------+------+------+--------+------+------+---------+------+------+--------+------+------+------+------+------+------+------+------+------+---------------------+---------------------+
| 1610612737 | 0022100014 | OCT 21, 2021 | ATL vs. DAL | W    |    1 |    0 |     1 |  240 |   45 |   94 |  0.479 |   15 |   35 |   0.429 |    8 |    9 |  0.889 |    6 |   49 |   55 |   31 |    8 |    9 |   13 |   16 |  113 | 2022-08-27 11:40:01 | 2022-08-27 11:40:01 |
| 1610612737 | 0022100027 | OCT 23, 2021 | ATL @ CLE   | L    |    1 |    1 |   0.5 |  240 |   38 |   99 |  0.384 |   10 |   34 |   0.294 |    9 |   15 |    0.6 |   17 |   37 |   54 |   20 |    5 |    3 |    9 |   23 |   95 | 2022-08-27 11:40:01 | 2022-08-27 11:40:01 |
| 1610612737 | 0022100043 | OCT 25, 2021 | ATL vs. DET | W    |    2 |    1 | 0.667 |  240 |   46 |   90 |  0.511 |   12 |   32 |   0.375 |   18 |   21 |  0.857 |   10 |   39 |   49 |   24 |   11 |    3 |   13 |   19 |  122 | 2022-08-27 11:40:01 | 2022-08-27 11:40:01 |
+------------+------------+--------------+-------------+------+------+------+-------+------+------+------+--------+------+------+---------+------+------+--------+------+------+------+------+------+------+------+------+------+---------------------+---------------------+
3 rows in set (0.00 sec)

# Games won by the fewest points
mysql> SELECT t.full_name, tgl.* FROM team_game_log AS tgl INNER JOIN teams AS t ON tgl.Team_ID=t.id WHERE tgl.PTS = (SELECT MIN(tgl1.PTS) FROM team_game_log AS tgl1 WHERE tgl1.WL = "W");
+------------------+------------+------------+--------------+-----------+------+------+------+-------+------+------+------+--------+------+------+---------+------+------+--------+------+------+------+------+------+------+------+------+------+---------------------+---------------------+
| full_name        | Team_ID    | Game_ID    | GAME_DATE    | MATCHUP   | WL   | W    | L    | W_PCT | MIN  | FGM  | FGA  | FG_PCT | FG3M | FG3A | FG3_PCT | FTM  | FTA  | FT_PCT | OREB | DREB | REB  | AST  | STL  | BLK  | TOV  | PF   | PTS  | created_at          | updated_at          |
+------------------+------------+------------+--------------+-----------+------+------+------+-------+------+------+------+--------+------+------+---------+------+------+--------+------+------+------+------+------+------+------+------+------+---------------------+---------------------+
| Dallas Mavericks | 1610612742 | 0022200161 | NOV 09, 2022 | DAL @ ORL | L    |    6 |    4 |   0.6 |  240 |   32 |   85 |  0.376 |   11 |   42 |   0.262 |   12 |   19 |  0.632 |    4 |   25 |   29 |   17 |   14 |    4 |    4 |   19 |   87 | 2023-01-15 07:32:24 | 2023-01-15 07:32:24 |
| Miami Heat       | 1610612748 | 0022200244 | NOV 20, 2022 | MIA @ CLE | L    |    7 |   10 | 0.412 |  240 |   31 |   80 |  0.388 |    6 |   31 |   0.194 |   19 |   22 |  0.864 |   11 |   19 |   30 |   17 |    6 |    3 |   16 |   16 |   87 | 2023-01-15 07:32:24 | 2023-01-15 07:32:24 |
| Miami Heat       | 1610612748 | 0022200402 | DEC 12, 2022 | MIA @ IND | W    |   13 |   15 | 0.464 |  240 |   32 |   83 |  0.386 |    9 |   34 |   0.265 |   14 |   18 |  0.778 |    9 |   39 |   48 |   23 |    7 |    2 |   13 |   17 |   87 | 2023-01-15 07:32:24 | 2023-01-15 07:32:24 |
+------------------+------------+------------+--------------+-----------+------+------+------+-------+------+------+------+--------+------+------+---------+------+------+--------+------+------+------+------+------+------+------+------+------+---------------------+---------------------+
3 rows in set (0.01 sec)
```

### exit
This operation erases the DB container, so the data you put in the DB will disappear.
```sh
$ docker compose down
```

### trouble shooting
```sh
$ sudo service docker restart
```
